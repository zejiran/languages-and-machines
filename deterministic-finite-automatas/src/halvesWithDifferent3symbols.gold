/**
 * TP2.2.
 *
* The language of all strings over the alphabet ğ´ = {ğ‘, ğ‘, ğ‘, ğ‘‘, ğ‘’} of the form
* ğœ”$ğ‘‹, where ğœ” contains at least 3 different symbols of ğ´ and ğ‘‹ is a string
* composed with symbols of ğ´ that did not appear in ğœ”.
 *
 * Author: Juan AlegrÃ­a - 202011282
 */
 
using gold.**
using gold.structures.automaton.*
using gold.visualization.automaton.*
using gold.structures.set.*

procedure main(args:String[]) begin
	GAutomataFrame.show(createAutomaton())
	Utilities.test(createAutomaton())
end

function createAutomaton():IAutomaton begin
	Q := {'a', 'b', 'c', 'd', 'e'} âˆª 
		  {'0'}Ã—{'a'}Ã—{'b', 'c', 'd', 'e'} âˆª
		  {'0'}Ã—{'b'}Ã—{'a', 'c', 'd', 'e'} âˆª
		  {'0'}Ã—{'c'}Ã—{'a', 'b', 'd', 'e'} âˆª
		  {'0'}Ã—{'d'}Ã—{'a', 'b', 'c', 'e'} âˆª
		  {'0'}Ã—{'e'}Ã—{'a', 'b', 'c', 'd'} âˆª
		  {'$', '1'}Ã—{'a', '1'}Ã—{'b', 'c', 'd', 'e', '1'} âˆª
		  {'$', '1'}Ã—{'b', '1'}Ã—{'a', 'c', 'd', 'e', '1'} âˆª
		  {'$', '1'}Ã—{'c', '1'}Ã—{'a', 'b', 'd', 'e', '1'} âˆª
		  {'$', '1'}Ã—{'d', '1'}Ã—{'a', 'b', 'c', 'e', '1'} âˆª
		  {'$', '1'}Ã—{'e', '1'}Ã—{'a', 'b', 'c', 'd', '1'} âˆª
		  {'0', âŸ¨'1', '1', '1'âŸ©}
	Î£ := {'a', 'b', 'c', 'd', 'e', '$'}
	qâ‚€ := '0'
	F := {âŸ¨'1', '1', '1'âŸ©}
	return GDeterministicAutomaton(Q,Î£,qâ‚€,F,d)
end

function d(x, z) begin
	if x = '0' then
		if z = 'a' or z = 'b' or z = 'c' or z = 'd' or z = 'e' then return z
		elseif z = '0' then return z
		elseif z = '$' then return '0'
		end
		
	elseif x = 'a' then
		if z = 'b' or z = 'c' or z = 'd' or z= 'e' then return âŸ¨'0', x, zâŸ©
		else return x
		end
	elseif x = 'b' then
		if z = 'a' or z = 'c' or z = 'd' or z= 'e' then return âŸ¨'0', x, zâŸ©
		else return x
		end
	elseif x = 'c' then
		if z = 'a' or z = 'b' or z = 'd' or z= 'e' then return âŸ¨'0', x, zâŸ©
		else return x
		end
	elseif x = 'd' then
		if z = 'a' or z = 'b' or z = 'c' or z= 'e' then return âŸ¨'0', x, zâŸ©
		else return x
		end
	elseif x = 'e' then
		if z = 'a' or z = 'b' or z = 'c' or z= 'd' then return âŸ¨'0', x, zâŸ©
		else return x
		end
	end
end

function d(âŸ¨w, x, yâŸ©, z) begin
	if w = '$' or w = '1' then
		if w = z then return âŸ¨'1', x, yâŸ©
		elseif x = z then return âŸ¨w, '1', yâŸ©
		elseif y = z then return âŸ¨w, x, '1'âŸ©	
		else return âŸ¨w, x, yâŸ©	
		end
	end
	if x = 'a' then
		if y = 'b' then 
			if z = 'c' then return âŸ¨'$', 'd', 'e'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'c', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'c', 'd'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'c' then 
			if z = 'b' then return âŸ¨'$', 'd', 'e'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'b', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'b', 'd'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'd' then 
			if z = 'b' then return âŸ¨'$', 'c', 'e'âŸ©
			elseif z = 'c' then return âŸ¨'$', 'b', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'b', 'c'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'e' then 
			if z = 'b' then return âŸ¨'$', 'c', 'd'âŸ©
			elseif z = 'c' then return âŸ¨'$', 'b', 'd'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'b', 'c'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		end
	end
	if x = 'b' then
		if y = 'a' then 
			if z = 'c' then return âŸ¨'$', 'd', 'e'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'c', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'c', 'd'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'c' then 
			if z = 'a' then return âŸ¨'$', 'd', 'e'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'a', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'a', 'd'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'd' then 
			if z = 'a' then return âŸ¨'$', 'c', 'e'âŸ©
			elseif z = 'c' then return âŸ¨'$', 'a', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'a', 'c'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'e' then 
			if z = 'a' then return âŸ¨'$', 'c', 'd'âŸ©
			elseif z = 'c' then return âŸ¨'$', 'a', 'd'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'a', 'c'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		end
	end
	if x = 'c' then
		if y = 'b' then 
			if z = 'a' then return âŸ¨'$', 'd', 'e'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'a', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'a', 'd'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'a' then 
			if z = 'b' then return âŸ¨'$', 'd', 'e'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'b', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'b', 'd'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'd' then 
			if z = 'b' then return âŸ¨'$', 'a', 'e'âŸ©
			elseif z = 'a' then return âŸ¨'$', 'b', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'a', 'b'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'e' then 
			if z = 'b' then return âŸ¨'$', 'a', 'd'âŸ©
			elseif z = 'a' then return âŸ¨'$', 'b', 'd'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'a', 'b'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		end
	end
	if x = 'd' then
		if y = 'b' then 
			if z = 'c' then return âŸ¨'$', 'a', 'e'âŸ©
			elseif z = 'a' then return âŸ¨'$', 'c', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'a', 'c'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'c' then 
			if z = 'b' then return âŸ¨'$', 'a', 'e'âŸ©
			elseif z = 'a' then return âŸ¨'$', 'b', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'a', 'b'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'a' then 
			if z = 'b' then return âŸ¨'$', 'c', 'e'âŸ©
			elseif z = 'c' then return âŸ¨'$', 'b', 'e'âŸ©
			elseif z = 'e' then return âŸ¨'$', 'b', 'c'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'e' then 
			if z = 'b' then return âŸ¨'$', 'a', 'c'âŸ©
			elseif z = 'c' then return âŸ¨'$', 'a', 'b'âŸ©
			elseif z = 'a' then return âŸ¨'$', 'b', 'c'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		end
	end
	if x = 'e' then
		if y = 'b' then 
			if z = 'c' then return âŸ¨'$', 'a', 'd'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'a', 'c'âŸ©
			elseif z = 'a' then return âŸ¨'$', 'c', 'd'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'c' then 
			if z = 'b' then return âŸ¨'$', 'a', 'd'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'a', 'b'âŸ©
			elseif z = 'a' then return âŸ¨'$', 'b', 'd'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'd' then 
			if z = 'b' then return âŸ¨'$', 'a', 'c'âŸ©
			elseif z = 'c' then return âŸ¨'$', 'a', 'b'âŸ©
			elseif z = 'a' then return âŸ¨'$', 'b', 'c'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		elseif y = 'a' then 
			if z = 'b' then return âŸ¨'$', 'c', 'd'âŸ©
			elseif z = 'c' then return âŸ¨'$', 'b', 'd'âŸ©
			elseif z = 'd' then return âŸ¨'$', 'b', 'c'âŸ©
			else return âŸ¨w, x, yâŸ©
			end
		end
	end
end
